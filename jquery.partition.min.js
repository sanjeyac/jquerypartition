(function(a){a.fn.extend({partition:function(j){var d={containerId:a(this).attr("id"),values:[25,25,25,25],width:500,colors:["red","blue","black","green"],height:20,onCursorStop:null,onDrag:null,onInit:null,cursorBackgroundColor:"#e6e6e6",cursorBorderColor:"#d4d4d4",mouseCursor:"e-resize"};var h=a.extend(d,j);var f={oldPosition:0,enable:false,selectedCursor:null,firstBox:null,secondBox:null};var g={};var b={};function c(){var n=0;for(key in b){n+=a("#"+h.containerId+" #"+b[key]).width()}var m=0;for(key in b){var k=a("#"+h.containerId+" #"+b[key]).width();var l=Math.round(k/n*100);h.values[m]=l;m++}}a(document).mousemove(function(o){if(f.enable){var p=f.oldPosition-o.pageX;if(p!=0){var l=a("#"+h.containerId+" #"+f.firstBox).width();var n=l-p;var k=a("#"+h.containerId+" #"+f.secondBox).width();var m=k+p;if(m>=0||n<l){a("#"+h.containerId+" #"+f.firstBox).width(n)}if(n>=0||m<k){a("#"+h.containerId+" #"+f.secondBox).width(m)}f.oldPosition=o.pageX;c()}if(h.onDrag!=null){h.onDrag(h.values)}}});a(document).mouseup(function(k){if(f.enable){f.enable=false;f.actualPosition=k.pageX;if(h.onCursorStop!=null){h.onCursorStop(h.values)}}});function i(l){var o=l.values.length;for(var k=0;k<o;k++){g[k]="cursor"+k;b[k]="partBox"+k;var m="<div style='float:left;margin-top:2px;background-color:"+l.colors[k]+";height:"+l.height+"px;width:"+Math.round(l.values[k]*l.width/100)+"px;' id='partBox"+k+"' ></div>";a("#"+l.containerId).append(m);if(k!=o-1){var m="<div style='float:left;background-color:"+l.cursorBackgroundColor+";cursor:"+l.mouseCursor+";border:solid 1px"+l.cursorBorderColor+";height:"+(l.height+4)+"px;width:"+l.height+"px;' id='"+g[k]+"' class='dragCursor' ></div>";a("#"+l.containerId).append(m)}}a("#"+l.containerId).append("<div style='clear:both'></div>");e()}function e(){a("#"+h.containerId+" .dragCursor").mousedown(function(l){var k=a(this).attr("id");for(key in g){if(g[key]==k){f.selectedCursor=parseInt(key)}}f.firstBox=b[f.selectedCursor];f.secondBox=b[f.selectedCursor+1];f.enable=true;f.oldPosition=l.pageX;l.preventDefault()})}i(h);if(h.onInit!=null){h.onInit(h.values)}}})})(jQuery);